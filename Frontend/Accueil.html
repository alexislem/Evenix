<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Bienvenue sur Evenix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- CSS externe -->
  <link rel="stylesheet" href="css/Accueil.css" />
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-wrap">
      <a class="brand" href="index.html">
        <span class="brand-name">Evenix</span>
      </a>
      <nav class="nav">
        <a href="index.html" class="nav-link">Accueil</a>
        <a href="ListeEvenement.html" class="nav-link">Événement</a>
        <a href="A-propos.html" class="nav-link">A Propos</a>
        <a href="Contact.html" class="nav-link">Contact</a>
      </nav>
      <button class="nav-toggle" aria-label="Ouvrir le menu">☰</button>
    </div>
  </header>

  <main>
    <!-- HERO (bannière) -->
    <section class="hero">
      <div class="container hero-wrap">
        <img src="image/Accueil.png" alt="Bannière Evenix" class="hero-img" />
      </div>
    </section>

<!-- ÉVÉNEMENTS RECOMMANDÉS -->
<section class="section">
  <div class="container">
    <h2 class="section-title">Nos Événements recommandés</h2>
    <div class="grid cards" id="cards-reco"></div>
  </div>
</section>

<script>
(async () => {
  const container = document.getElementById('cards-reco');

  function escapeHtml(s){
    return (s ?? '').toString().replace(/[&<>"']/g, m => ({
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'
    }[m]));
  }
  const fmt = iso => iso ? new Date(iso).toLocaleString('fr-FR', {
    day:'2-digit', month:'2-digit', year:'numeric', hour:'2-digit', minute:'2-digit'
  }) : '';

  try {
    const res = await fetch('http://localhost:8080/api/evenement/recommandes?limit=8');
    if (!res.ok) throw new Error('API non disponible');
    const events = await res.json();

    if (!events.length) {
      container.innerHTML = `<p>Aucun événement pour le moment.</p>`;
      return;
    }

    const html = events.map(ev => {
      const prix = (ev.payant === true)
        ? `${(ev.prix ?? 0).toFixed(2)} €`
        : 'Gratuit';
      const img = ev.imageUrl || 'image/gims.jpg'; // si tu ajoutes imageUrl côté DTO
      return `
        <article class="card">
          <img class="card-media" src="${img}" alt="${escapeHtml(ev.nom)}" />
          <div class="card-body">
            <h3 class="card-title">${escapeHtml(ev.nom)}</h3>
            <p class="card-date">${fmt(ev.dateDebut)}</p>
            <p class="card-price">${prix}</p>
            <a class="btn btn-secondary" href="evenement.html?id=${ev.id}">Voir</a>
          </div>
        </article>
      `;
    }).join('');

    container.innerHTML = html;
  } catch (e) {
    console.error(e);
    container.innerHTML = `<p>Impossible de charger les événements.</p>`;
  }
})();
</script>


    <!-- CONTACT -->
    <section class="section contact">
      <div class="container contact-wrap">
        <div class="contact-intro">
          <h2>Nous contacter</h2>
          <p>Remplissez le formulaire suivant</p>
        </div>

        <form class="contact-form" action="#" method="post" novalidate>
          <div class="form-row">
            <div class="form-field">
              <label for="nom">Nom</label>
              <input id="nom" name="nom" type="text" placeholder="Votre nom" required />
            </div>
            <div class="form-field">
              <label for="prenom">Prénom</label>
              <input id="prenom" name="prenom" type="text" placeholder="Votre prénom" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-field full">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="votre@email.com" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-field full">
              <label for="message">Votre message</label>
              <textarea id="message" name="message" rows="5" placeholder="Écrivez votre message..."></textarea>
            </div>
          </div>

          <button type="submit" class="btn btn-primary">Envoyer</button>
        </form>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container footer-wrap">
      <div class="footer-brand">Evenix</div>
      <div class="footer-col">
        <h4>Localisation</h4>
        <p>1 rue de Paris<br>Paris, 75001</p>
      </div>
      <div class="footer-col">
        <h4>Contact</h4>
        <p>contact@evenix.com<br>07 98 45 76 21</p>
      </div>
    </div>
    <div class="container footer-bottom">
      <p>&copy; 2025 Evenix — Tous droits réservés.</p>
    </div>
  </footer>

</body>
</html>
